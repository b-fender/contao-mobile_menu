/* mobile_menu extension for Contao Open Source CMS, Copyright (C) 2011-2017 Codefog */
!function(a,b,c,d){"use strict";function g(b,c){this.element=a(b),this.overlay=null,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="mobileMenu",f={animation:!1,animationSpeed:500,breakPoint:0,disableNavigation:!1,menuActiveClass:"active",menuSubNavigationHideCssClass:"submenu_hide",menuSubNavigationShowCssClass:"submenu_show",offCanvas:!1,offCanvasWrapper:null,offCanvasWrapperClass:"mobile_menu_wrapper",overlay:!1,overlayActiveCssClass:"active",overlayBackgroundCssClass:"background",overlayCssClass:"mobile_menu_overlay",position:"left",parentTogglers:!1,size:75,trigger:null};a.extend(g.prototype,{init:function(){var c=a("body");if(!c.hasClass("ie8")&&!c.hasClass("ie9")){null===this.settings.offCanvasWrapper&&(this.settings.offCanvasWrapper=a("#wrapper")),this.initMenu(),this.initTrigger(),this.initOverlay(),this.settings.offCanvas&&this.initOffCanvasWrapper();var d=this;a(b).on("resize",function(){d.updateElementsVisibility()}),this.updateElementsVisibility(),this.element.css("display","block")}},initMenu:function(){var b=this,c=(this.settings.size>100?100:this.settings.size)+"%",d=this.getAnimationSpeed();switch(this.settings.disableNavigation!==!0&&this.element.find(".level_1").each(function(){b.initMenuNavigation(a(this))}),this.element.find('[data-mobile-menu="close"]').on("click",function(a){a.preventDefault(),b.hideMenu()}),this.element.addClass("position_"+this.settings.position),this.element.appendTo("body"),this.settings.position){case"left":this.element.css({left:0,top:0,width:c,height:"100vh"}),this.element.css(this.getCssTranslateRules("-100%",0));break;case"top":this.element.css({left:0,top:0,height:c,width:"100%"}),this.element.css(this.getCssTranslateRules(0,"-100%"));break;case"bottom":this.element.css({left:0,bottom:0,height:c,width:"100%"}),this.element.css(this.getCssTranslateRules(0,"100%"));break;case"right":this.element.css({right:0,top:0,width:c,height:"100vh"}),this.element.css(this.getCssTranslateRules("100%",0))}this.element.css({"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","backface-visibility":"hidden"}),d&&this.element.css({"-webkit-transition":"-webkit-transform "+d+"ms ease","-moz-transition":"-moz-transform "+d+"ms ease","-o-transition":"-o-transform "+d+"ms ease",transition:"transform "+d+"ms ease"})},initMenuNavigation:function(b){var c=this,d=b.children(".submenu");d.each(function(){var b=a(this),e=b.children("a, span, strong").eq(0);e.hasClass("active")||e.hasClass("trail")?b.addClass(c.settings.menuSubNavigationShowCssClass):b.addClass(c.settings.menuSubNavigationHideCssClass),e.on("click",function(b){var e=a(this).parent();e.hasClass(c.settings.menuSubNavigationShowCssClass)?c.settings.parentTogglers&&(b.preventDefault(),e.addClass(c.settings.menuSubNavigationHideCssClass).removeClass(c.settings.menuSubNavigationShowCssClass)):(b.preventDefault(),d.removeClass(c.settings.menuSubNavigationShowCssClass).addClass(c.settings.menuSubNavigationHideCssClass),e.removeClass(c.settings.menuSubNavigationHideCssClass).addClass(c.settings.menuSubNavigationShowCssClass))});var f=b.children("ul").eq(0);f&&c.initMenuNavigation(f)})},initTrigger:function(){if(this.settings.trigger){var a=this;this.settings.trigger.on("click",function(){a.toggleMenu()})}},initOffCanvasWrapper:function(){var b=this.getAnimationSpeed(),c=a("<div>",{class:this.settings.offCanvasWrapperClass});switch(this.settings.offCanvasWrapper.parent().hasClass(this.settings.offCanvasWrapperClass)||this.settings.offCanvasWrapper.wrap(c),this.settings.offCanvasWrapper.css({"-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)","-o-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)","-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","backface-visibility":"hidden"}),b>0&&this.settings.offCanvasWrapper.css({"-webkit-transition":"-webkit-transform "+b+"ms ease","-moz-transition":"-moz-transform "+b+"ms ease","-o-transition":"-o-transform "+b+"ms ease",transition:"transform "+b+"ms ease"}),this.settings.position){case"left":this.settings.offCanvasWrapper.css("left",0);break;case"top":this.settings.offCanvasWrapper.css("top",0);break;case"bottom":this.settings.offCanvasWrapper.css("bottom",0);break;case"right":this.settings.offCanvasWrapper.css("right",0)}},initOverlay:function(){var b=this,c=this.settings.overlayCssClass;this.settings.overlay&&(c=c+" "+this.settings.overlayBackgroundCssClass),this.overlay=a("<div>",{id:this.element.attr("id")+"-overlay",class:c}).on("click",function(){b.hideMenu()}).hide().appendTo("body")},updateElementsVisibility:function(){b.matchMedia("(max-width: "+this.settings.breakPoint+"px)").matches?this.showTrigger():(this.hideMenu(),this.hideTrigger())},showTrigger:function(){this.settings.trigger&&this.settings.trigger.show()},hideTrigger:function(){this.settings.trigger&&this.settings.trigger.hide()},showOverlay:function(){this.overlay&&(this.overlay.show(),this.overlay.addClass(this.settings.overlayActiveCssClass))},hideOverlay:function(){this.overlay&&(this.overlay.hide(),this.overlay.removeClass(this.settings.overlayActiveCssClass))},showMenu:function(){switch(this.settings.position){case"left":this.element.css(this.getCssTranslateRules(0,0,!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(this.settings.size+"%",0,!0));break;case"top":this.element.css(this.getCssTranslateRules(0,0,!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,a(b).height()*(this.settings.size/100)+"px",!0));break;case"bottom":this.element.css(this.getCssTranslateRules(0,0,!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,-1*a(b).height()*(this.settings.size/100)+"px",!0));break;case"right":this.element.css(this.getCssTranslateRules(0,0,!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(-1*this.settings.size+"%",0,!0))}this.showOverlay(),this.element.addClass(this.settings.menuActiveClass),this.settings.trigger&&this.settings.trigger.addClass(this.settings.menuActiveClass)},hideMenu:function(){switch(this.settings.position){case"left":this.element.css(this.getCssTranslateRules("-100%",0,!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,!0));break;case"top":this.element.css(this.getCssTranslateRules(0,"-100%",!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,!0));break;case"bottom":this.element.css(this.getCssTranslateRules(0,"100%",!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,!0));break;case"right":this.element.css(this.getCssTranslateRules("100%",0,!0)),this.settings.offCanvas&&this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,!0))}this.hideOverlay(),this.element.removeClass(this.settings.menuActiveClass),this.settings.trigger&&this.settings.trigger.removeClass(this.settings.menuActiveClass)},toggleMenu:function(){this.isActive()?this.hideMenu():this.showMenu()},isActive:function(){return this.element.hasClass(this.settings.menuActiveClass)},getCssTranslateRules:function(a,b,c){return c=c?" scale3d(1, 1, 1)":"",{"will-change":"transform","-webkit-transform":"translate3d("+a+", "+b+", 0)"+c,"-moz-transform":"translate3d("+a+", "+b+", 0)"+c,"-ms-transform":"translate3d("+a+", "+b+", 0)"+c,"-o-transform":"translate3d("+a+", "+b+", 0)"+c,transform:"translate3d("+a+", "+b+", 0)"+c}},getAnimationSpeed:function(){return this.settings.animation?this.settings.animationSpeed:0}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,b))})}}(jQuery,window,document);
