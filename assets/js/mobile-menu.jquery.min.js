/* mobile_menu extension for Contao Open Source CMS, Copyright (C) 2011-2016 Codefog */
;(function(e,c,a,g){var d="mobileMenu",f={animation:false,animationSpeed:500,breakPoint:0,disableNavigation:false,menuActiveClass:"active",menuSubNavigationHideCssClass:"submenu_hide",menuSubNavigationShowCssClass:"submenu_show",offCanvas:false,offCanvasWrapper:null,offCanvasWrapperClass:"mobile_menu_wrapper",overlay:false,overlayActiveCssClass:"active",overlayBackgroundCssClass:"background",overlayCssClass:"mobile_menu_overlay",position:"left",size:75,trigger:null};function b(i,h){this.element=e(i);this.overlay=null;this.settings=e.extend({},f,h);this._defaults=f;this._name=d;this.init()}e.extend(b.prototype,{init:function(){var h=e("body");if(h.hasClass("ie8")||h.hasClass("ie9")){return}if(this.settings.offCanvasWrapper===null){this.settings.offCanvasWrapper=e("#wrapper")}this.initMenu();this.initTrigger();this.initOverlay();if(this.settings.offCanvas){this.initOffCanvasWrapper()}var i=this;e(c).on("resize",function(){i.updateElementsVisibility()});this.updateElementsVisibility();this.element.css("display","block")},initMenu:function(){var h=this;var i=((this.settings.size>100)?100:this.settings.size)+"%";var j=this.getAnimationSpeed();if(this.settings.disableNavigation!==true){this.element.find(".level_1").each(function(){h.initMenuNavigation(e(this))})}this.element.find('[data-mobile-menu="close"]').on("click",function(k){k.preventDefault();h.hideMenu()});this.element.addClass("position_"+this.settings.position);this.element.appendTo("body");switch(this.settings.position){case"left":this.element.css({left:0,top:0,width:i,height:"100vh"});this.element.css(this.getCssTranslateRules("-100%",0));break;case"top":this.element.css({left:0,top:0,height:i,width:"100%"});this.element.css(this.getCssTranslateRules(0,"-100%"));break;case"bottom":this.element.css({left:0,bottom:0,height:i,width:"100%"});this.element.css(this.getCssTranslateRules(0,"100%"));break;case"right":this.element.css({right:0,top:0,width:i,height:"100vh"});this.element.css(this.getCssTranslateRules("100%",0));break}this.element.css({"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","backface-visibility":"hidden"});if(j){this.element.css({"-webkit-transition":"-webkit-transform "+j+"ms ease","-moz-transition":"-moz-transform "+j+"ms ease","-o-transition":"-o-transform "+j+"ms ease",transition:"transform "+j+"ms ease"})}},initMenuNavigation:function(h){var i=this;var j=h.children(".submenu");j.each(function(){var m=e(this);var l=m.children("a, span").eq(0);if(l.hasClass("active")||l.hasClass("trail")){m.addClass(i.settings.menuSubNavigationShowCssClass)}else{m.addClass(i.settings.menuSubNavigationHideCssClass)}l.on("click",function(o){var n=e(this).parent();if(!n.hasClass(i.settings.menuSubNavigationShowCssClass)){o.preventDefault();j.removeClass(i.settings.menuSubNavigationShowCssClass).addClass(i.settings.menuSubNavigationHideCssClass);n.removeClass(i.settings.menuSubNavigationHideCssClass).addClass(i.settings.menuSubNavigationShowCssClass)}});var k=m.children("ul").eq(0);if(k){i.initMenuNavigation(k)}})},initTrigger:function(){if(!this.settings.trigger){return}var h=this;this.settings.trigger.on("click",function(){h.toggleMenu()})},initOffCanvasWrapper:function(){var h=this.getAnimationSpeed();var i=e("<div>",{"class":this.settings.offCanvasWrapperClass});if(!this.settings.offCanvasWrapper.parent().hasClass(this.settings.offCanvasWrapperClass)){this.settings.offCanvasWrapper.wrap(i)}this.settings.offCanvasWrapper.css({"-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)","-ms-transform":"translate3d(0, 0, 0)","-o-transform":"translate3d(0, 0, 0)",transform:"translate3d(0, 0, 0)","-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","backface-visibility":"hidden"});if(h>0){this.settings.offCanvasWrapper.css({"-webkit-transition":"-webkit-transform "+h+"ms ease","-moz-transition":"-moz-transform "+h+"ms ease","-o-transition":"-o-transform "+h+"ms ease",transition:"transform "+h+"ms ease"})}switch(this.settings.position){case"left":this.settings.offCanvasWrapper.css("left",0);break;case"top":this.settings.offCanvasWrapper.css("top",0);break;case"bottom":this.settings.offCanvasWrapper.css("bottom",0);break;case"right":this.settings.offCanvasWrapper.css("right",0);break}},initOverlay:function(){var i=this;var h=this.settings.overlayCssClass;if(this.settings.overlay){h=h+" "+this.settings.overlayBackgroundCssClass}this.overlay=e("<div>",{id:this.element.attr("id")+"-overlay","class":h}).on("click",function(){i.hideMenu()}).hide().appendTo("body")},updateElementsVisibility:function(){if(c.matchMedia("(max-width: "+this.settings.breakPoint+"px)").matches){this.showTrigger()}else{this.hideMenu();this.hideTrigger()}},showTrigger:function(){if(!this.settings.trigger){return}this.settings.trigger.show()},hideTrigger:function(){if(!this.settings.trigger){return}this.settings.trigger.hide()},showOverlay:function(){if(!this.overlay){return}this.overlay.show();this.overlay.addClass(this.settings.overlayActiveCssClass)},hideOverlay:function(){if(!this.overlay){return}this.overlay.hide();this.overlay.removeClass(this.settings.overlayActiveCssClass)},showMenu:function(){switch(this.settings.position){case"left":this.element.css(this.getCssTranslateRules(0,0,true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(this.settings.size+"%",0,true))}break;case"top":this.element.css(this.getCssTranslateRules(0,0,true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,(e(c).height()*(this.settings.size/100))+"px",true))}break;case"bottom":this.element.css(this.getCssTranslateRules(0,0,true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,(-1*e(c).height()*(this.settings.size/100))+"px",true))}break;case"right":this.element.css(this.getCssTranslateRules(0,0,true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules((-1*this.settings.size)+"%",0,true))}break}this.showOverlay();this.element.addClass(this.settings.menuActiveClass);if(this.settings.trigger){this.settings.trigger.addClass(this.settings.menuActiveClass)}},hideMenu:function(){switch(this.settings.position){case"left":this.element.css(this.getCssTranslateRules("-100%",0,true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,true))}break;case"top":this.element.css(this.getCssTranslateRules(0,"-100%",true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,true))}break;case"bottom":this.element.css(this.getCssTranslateRules(0,"100%",true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,true))}break;case"right":this.element.css(this.getCssTranslateRules("100%",0,true));if(this.settings.offCanvas){this.settings.offCanvasWrapper.css(this.getCssTranslateRules(0,0,true))}break}this.hideOverlay();this.element.removeClass(this.settings.menuActiveClass);if(this.settings.trigger){this.settings.trigger.removeClass(this.settings.menuActiveClass)}},toggleMenu:function(){if(this.isActive()){this.hideMenu()}else{this.showMenu()}},isActive:function(){return this.element.hasClass(this.settings.menuActiveClass)},getCssTranslateRules:function(h,j,i){i=i?" scale3d(1, 1, 1)":"";return{"-webkit-transform":"translate3d("+h+", "+j+", 0)"+i,"-moz-transform":"translate3d("+h+", "+j+", 0)"+i,"-ms-transform":"translate3d("+h+", "+j+", 0)"+i,"-o-transform":"translate3d("+h+", "+j+", 0)"+i,transform:"translate3d("+h+", "+j+", 0)"+i}},getAnimationSpeed:function(){if(!this.settings.animation){return 0}return this.settings.animationSpeed}});e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);