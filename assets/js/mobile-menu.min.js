/**
 * mobile_menu extension for Contao Open Source CMS
 *
 * Copyright (C) 2011-2014 Codefog
 *
 * @package mobile_menu
 * @author  Codefog <http://codefog.pl>
 * @author  Kamil Kuzminski <kamil.kuzminski@codefog.pl>
 * @license LGPL
 */
;var mobileMenu=function(e){var t=e.menu;var n=e.trigger;var r=e.overlay;var i=function(e){var t=[];var n=e.children;for(var r=0;r<n.length;r++){if(s(n[r],"submenu")){t.push(n[r])}}for(var r=0;r<t.length;r++){var a=t[r];var n=a.children;var f=null;for(var l=0;l<n.length;l++){if(n[l].tagName.toLowerCase()=="a"||n[l].tagName.toLowerCase()=="span"){f=n[l];break}}if(s(f,"active")||s(f,"trail")){o(a,"display_submenu")}f.addEventListener("click",function(e){var n=this.parentNode;if(!s(n,"display_submenu")){e.preventDefault();for(var r=0;r<t.length;r++){u(t[r],"display_submenu")}o(n,"display_submenu")}});var c=null;var n=a.children;for(var l=0;l<n.length;l++){if(n[l].tagName.toLowerCase()=="ul"){c=n[l];break}}if(c){i(c)}}};var s=function(e,t){return e.className.split(" ").indexOf(t)==-1?false:true};var o=function(e,t){if(s(e,t)){return}e.className=e.className+" "+t};var u=function(e,t){if(!s(e,t)){return}var n=e.className.split(" ");n.splice(n.indexOf(t),1);e.className=n.join(" ")};document.body.appendChild(t);var a=t.getElementsByClassName("level_1")[0];if(a){i(a)}n.addEventListener("click",function(e){e.preventDefault();o(t,"active");o(r,"active")});document.body.appendChild(r);r.addEventListener("click",function(){u(t,"active");u(r,"active")})};